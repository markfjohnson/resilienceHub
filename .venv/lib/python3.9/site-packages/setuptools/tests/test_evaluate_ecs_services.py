from unittest import TestCase

import SampleResourceInventoryEvaluationScripts.war_runner.reliability.evaluate_ecs_services as ecsr
import SampleResourceInventoryEvaluationScripts.war_runner.common.war_service as war

class Testevaluate_ecs_services(TestCase):
    def test_setup(self):
        e = ecsr.evaluate_ecs_services()
        (clusters, tagList) = e.setup("us-east-1", "MyProduct")

        assert len(clusters) == 2
        assert len(tagList) == 0

    def test_setup_change_region(self):
        e = ecsr.evaluate_ecs_services()
        new_region = "us-east-2"
        (clusters, tagList) = e.setup(new_region, ['Product'])

        self.assertEqual(new_region, e.region, f"Found region {e.region}")


    def test_evaluate(self):
        e = ecsr.evaluate_ecs_services()
        (clusters, tagList) = e.setup("us-east-1", ['Product'])
        results = e.evaluate(["Product"], clusters)
        errMsg = f"Wrong Count of invalid ECS Clusters {len(results)}"
        self.assertEqual(2, len(results), errMsg)

